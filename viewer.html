<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="style.css">
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
</head>
<body style="background: transparent;"> 
    <div class="app" style="background: transparent; padding: 0;">
        <div id="scoreboard-container" class="scoreboard">
            </div>

        <div class="turn-history">
            <div class="dart" id="dart-0">?</div>
            <div class="dart" id="dart-1">?</div>
            <div class="dart" id="dart-2">?</div>
        </div>

        <div class="turn">
            <div class="turn-score" style="font-size: 30px;">0</div>
        </div>
    </div>

    <script>
        // ACHTUNG: Hier musst du deine echten Daten einfÃ¼gen!
        const firebaseConfig = {
            apiKey: "AIzaSyByWwnCTxs80kYeoLicbeEW_0MyeWjWFAI",
            authDomain: "dartstwitch-bc90e.firebaseapp.com",
            databaseURL: "https://dartstwitch-bc90e-default-rtdb.europe-west1.firebasedatabase.app/",
            projectId: "dartstwitch-bc90e",
            storageBucket: "dartstwitch-bc90e.appspot.com",
            messagingSenderId: "DEINE_ID",
            appId: "DEINE_APP_ID"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        db.ref('currentGame').on('value', (snapshot) => {
            const gameData = snapshot.val();
            if (gameData) updateUI(gameData);
        });

        function updateUI(game) {
            const container = document.getElementById('scoreboard-container');
            container.innerHTML = ""; // Leeren

            game.players.forEach((p, i) => {
                const playerDiv = document.createElement('div');
                playerDiv.className = `player ${i === game.currentPlayer ? 'active' : ''}`;
                playerDiv.innerHTML = `
                    <div class="name">${p.name}</div>
                    <div class="score">${p.score}</div>
                    <div class="meta">S: ${p.sets} | L: ${p.legs}</div>
                    <div style="font-size: 10px; color: var(--accent);">AVG: ${p.avg || '0.00'}</div>
                `;
                container.appendChild(playerDiv);
            });

            // Darts History
            for (let i = 0; i < 3; i++) {
                const val = game.currentTurnDarts ? game.currentTurnDarts[i] : undefined;
                document.getElementById(`dart-${i}`).innerText = val !== undefined ? val : "?";
            }
            document.querySelector(".turn-score").innerText = game.currentTurnScore || 0;
        }
    </script>
</body>
</html>
